<!doctype html>

<title>Script Editor</title>
<meta charset="utf-8"/>

<link rel="stylesheet" href="../dependencies/codeMirror/addon/hint/show-hint.css">
<link rel="stylesheet" href="../dependencies/codeMirror/lib/codemirror.css">
<link rel="stylesheet" href="./css/pasm_theme1.css">
<link rel="stylesheet" href="./css/css.css">

<script src="../dependencies/codeMirror/lib/codemirror.js"></script>
<script src="../dependencies/codeMirror/addon/hint/show-hint.js"></script>
<script src="../dependencies/codeMirror/addon/hint/anyword-hint.js"></script>
<script src="../dependencies/codeMirror/mode/javascript/javascript.js"></script>
<script src="../dependencies/codeMirror/addon/mode/simple.js"></script>
<script src="../dependencies/codeMirror/addon/display/fullscreen.js"></script>
<script src="../dependencies/jquery/jquery-3.2.1.min.js"></script>
<script src="../dependencies/FileSaver/FileSaver.js"></script>
<script src="../dependencies/Blob/Blob.js"></script>

<script src="./js/navBar.js"></script>
<script src="./js/opcode-hint.js"></script>
<script src="./js/opcodes.js"></script>
<script src="./js/syntaxHighlighting.js"></script>
<script src="./js/compile.js"></script>
<script src="./js/upload.js"></script>
<script src="./js/tokenize.js"></script>
<script src="./js/prs/ArrayBufferCursor.js"></script>
<script src="./js/prs/compress.js"></script>
<script src="./js/prs/decompress.js"></script>


<div id="mySidenav" class="sidenav">
  <a onclick='Nav_goto("name")' href="#">Quest Name</a>
  <a onclick='Nav_goto("shrt")' href="#">Short Description</a>
  <a onclick='Nav_goto("long")' href="#">Long Description</a>
  <a onclick='Nav_goto("code")' href="#">PASM Code</a>
</div>

<div id="main">

  <img id="icon" onclick="toggleNav()"></img>

  <div id="MenuBar">
    <div id="Compile"><input id="compile_button" type="button" value="Save" onclick="compileScript();" /></div>
    <div id="Upload">
      <label>Open</label>
      <input type="file" id="fileToLoad" onchange="loadFileAsText()">
    </div>

    <div id="TitleArea">Script Editor<span id="currentPage"></span></div>
  </div>


  <form>
    <textarea id="code" name="code"></textarea>
    <textarea id="name" name="name"></textarea>
    <textarea id="shrt" name="shrt"></textarea>
    <textarea id="long" name="long"></textarea>
  </form>
</div>





<script>
  // setup page on load
  document.getElementById('icon').src=("./images/icon" +Math.floor(Math.random() * 6 + 1) +".png");

  // Setup the coding area
  CodeMirror.commands.autocomplete = function(cm) {
    cm.showHint({hint: CodeMirror.hint.opcodes});
  }
  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    extraKeys: {"Ctrl-Space": "autocomplete"},
    mode: "pasm",
    theme: "pasm",
    fullScreen: true
  });
  var nameField = CodeMirror.fromTextArea(document.getElementById("name"), {
    lineNumbers: true,
    theme: "pasm",
    mode: "none",
    fullScreen: true
  });
  var longField = CodeMirror.fromTextArea(document.getElementById("long"), {
    lineNumbers: true,
    theme: "pasm",
    mode: "none",
    fullScreen: true
  });
  var shrtField = CodeMirror.fromTextArea(document.getElementById("shrt"), {
    lineNumbers: true,
    theme: "pasm",
    mode: "none",
    fullScreen: true
  });

  // hide all the boxes and make sure everything works
  var active_element = document.getElementById("name")
  Nav_goto("code")
  Nav_goto("shrt")
  Nav_goto("long")
  Nav_goto("name")
  
</script>

